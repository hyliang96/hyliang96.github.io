<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon16.png">
  <link rel="mask-icon" href="/images/favicon.svg" color="#222">
  <meta name="google-site-verification" content="VYSqFXy4SdSulNvauNz8l6z0WDUa1-t62R0hKya9Xmw">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"hyliang96.github.io","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.8.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>
<meta name="description" content="GitHub+Hexo 搭建个人网站详细教程 hexo博客搭建教程 安装环境">
<meta property="og:type" content="article">
<meta property="og:title" content="hexo博客搭建与升级">
<meta property="og:url" content="https://hyliang96.github.io/posts/b27b9f95/index.html">
<meta property="og:site_name" content="丹炉志">
<meta property="og:description" content="GitHub+Hexo 搭建个人网站详细教程 hexo博客搭建教程 安装环境">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://hyliang96.github.io/posts/b27b9f95/image-20210803005919113.png">
<meta property="og:image" content="https://hyliang96.github.io/posts/b27b9f95/search-console-verification-code.png">
<meta property="og:image" content="https://hyliang96.github.io/posts/b27b9f95/1567136478962442.jpg">
<meta property="og:image" content="https://hyliang96.github.io/posts/b27b9f95/iShot2021-08-03%2004.35.43.png">
<meta property="og:image" content="https://hyliang96.github.io/posts/b27b9f95/%E6%9C%AA%E5%91%BD%E5%90%8D.png">
<meta property="og:image" content="https://hyliang96.github.io/posts/b27b9f95/99628710-aaca7c80-2a71-11eb-9f9a-2b6ffef38704.png">
<meta property="og:image" content="https://hyliang96.github.io/posts/b27b9f95/image-20211220201408902.png">
<meta property="og:image" content="https://hyliang96.github.io/posts/b27b9f95/image-20211220193153301.png">
<meta property="article:published_time" content="2021-08-01T17:24:20.000Z">
<meta property="article:modified_time" content="2024-07-25T12:15:15.270Z">
<meta property="article:author" content="∞亼">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://hyliang96.github.io/posts/b27b9f95/image-20210803005919113.png">


<link rel="canonical" href="https://hyliang96.github.io/posts/b27b9f95/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://hyliang96.github.io/posts/b27b9f95/","path":"posts/b27b9f95/","title":"hexo博客搭建与升级"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>hexo博客搭建与升级 | 丹炉志</title>
  



<link rel="dns-prefetch" href="https://waline-hyliang96.vercel.app">
  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">丹炉志</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">深度学习及其运维日志</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>概览</a></li>
        <li class="menu-item menu-item-tools"><a href="/categories/%E5%99%A8/" rel="section"><i class="fa fa-wrench fa-fw"></i>器</a></li>
        <li class="menu-item menu-item-academics"><a href="/categories/%E6%9C%AF/" rel="section"><i class="fa fa-book fa-fw"></i>术</a></li>
        <li class="menu-item menu-item-philosophy"><a href="/categories/%E9%81%93/" rel="section"><i class="fas fa-circle-notch fa-fw"></i>道</a></li>
        <li class="menu-item menu-item-book"><a href="/categories/%E4%B9%A6%E7%B1%8D/" rel="section"><i class="fa fa-bookmark fa-fw"></i>书</a></li>
        <li class="menu-item menu-item-movie"><a href="/categories/%E5%BD%B1/" rel="section"><i class="fa fa-film fa-fw"></i>影</a></li>
        <li class="menu-item menu-item-photo"><a href="/categories/%E7%85%A7%E7%89%87/" rel="section"><i class="fas fa-photo-video fa-fw"></i>相</a></li>
        <li class="menu-item menu-item-essay"><a href="/categories/%E9%9A%8F%E7%AC%94/" rel="section"><i class="fas fa-edit fa-fw"></i>杂谈</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AE%89%E8%A3%85%E7%8E%AF%E5%A2%83"><span class="nav-text">安装环境</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#node"><span class="nav-text">node</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%89%E8%A3%85node"><span class="nav-text">安装node</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#npm"><span class="nav-text">npm</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%89%E8%A3%85npm"><span class="nav-text">安装npm</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9npm%E6%BA%90"><span class="nav-text">修改npm源</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#npm%E4%BD%BF%E7%94%A8"><span class="nav-text">npm使用</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#hexo"><span class="nav-text">hexo</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%89%E8%A3%85hexo"><span class="nav-text">安装hexo</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%88%9D%E5%A7%8B%E9%85%8D%E7%BD%AE"><span class="nav-text">初始配置</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BAhexo%E9%A1%B9%E7%9B%AE"><span class="nav-text">创建hexo项目</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#git%E9%85%8D%E7%BD%AE"><span class="nav-text">git配置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85npm%E5%8C%85"><span class="nav-text">安装npm包</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%B3%E4%BA%8E%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%9A%84%E8%AF%B4%E6%98%8E"><span class="nav-text">关于配置文件的说明</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%BF%81%E7%A7%BB%E5%8D%9A%E5%AE%A2"><span class="nav-text">迁移博客</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BF%81%E7%A7%BB%E9%85%8D%E7%BD%AE"><span class="nav-text">迁移配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BF%81%E7%A7%BB%E5%86%85%E5%AE%B9"><span class="nav-text">迁移内容</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE"><span class="nav-text">修改配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AF%84%E8%AE%BA%E5%8C%BA%E5%92%8C%E6%B5%8F%E8%A7%88%E8%AE%A1%E6%95%B0"><span class="nav-text">评论区和浏览计数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E5%9F%9F%E5%90%8D%E5%92%8C%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E"><span class="nav-text">配置域名和搜索引擎</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B8%B2%E6%9F%93"><span class="nav-text">渲染</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%83%A8%E7%BD%B2%E5%88%B0github"><span class="nav-text">部署到github</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%8D%87%E7%BA%A7"><span class="nav-text">升级</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8D%87%E7%BA%A7node"><span class="nav-text">升级node</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8D%87%E7%BA%A7npm"><span class="nav-text">升级npm</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B0%8F%E7%89%88%E6%9C%AC%E5%8D%87%E7%BA%A7hexo"><span class="nav-text">小版本升级hexo</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8D%87%E7%BA%A7%E5%85%A8%E5%B1%80%E7%9A%84hexo-cli"><span class="nav-text">升级全局的hexo-cli</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8D%87%E7%BA%A7%E9%A1%B9%E7%9B%AE%E5%86%85%E6%89%80%E6%9C%89npm%E5%8C%85"><span class="nav-text">升级项目内所有npm包</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A4%A7%E7%89%88%E6%9C%AC%E5%8D%87%E7%BA%A7hexo"><span class="nav-text">大版本升级hexo</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%A6%E8%B5%B7%E6%96%B0%E7%9A%84hexo%E9%A1%B9%E7%9B%AE%E5%86%8D%E8%BF%81%E7%A7%BB"><span class="nav-text">另起新的hexo项目再迁移</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E6%96%B0hexo%E9%A1%B9%E7%9B%AE%E6%96%87%E4%BB%B6%E5%A4%B9"><span class="nav-text">创建新hexo项目文件夹</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%A7%BB%E5%8A%A8%E6%BA%90%E6%96%87%E4%BB%B6"><span class="nav-text">移动源文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%87%8D%E6%96%B0%E5%AE%89%E8%A3%85npm%E5%8C%85"><span class="nav-text">重新安装npm包</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E6%96%B0%E6%96%87%E4%BB%B6"><span class="nav-text">配置新文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9C%AC%E5%9C%B0%E6%B8%B2%E6%9F%93%E5%B9%B6%E8%B0%83%E8%AF%95bug"><span class="nav-text">本地渲染并调试bug</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%87%8D%E6%96%B0git%E9%85%8D%E7%BD%AE"><span class="nav-text">重新git配置</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%8F%92%E4%BB%B6%E5%AE%89%E8%A3%85%E8%AF%B4%E6%98%8E"><span class="nav-text">插件安装说明</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8F%92%E4%BB%B6%E6%8E%A8%E8%8D%90%E4%B8%8E%E5%8F%82%E8%80%83"><span class="nav-text">插件推荐与参考</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AF%84%E8%AE%BA%E5%8C%BA"><span class="nav-text">评论区</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E"><span class="nav-text">搜索引擎</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B7%BB%E5%8A%A0%E5%93%AA%E4%B8%AA%E5%9F%9F%E5%90%8D"><span class="nav-text">添加哪个域名</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%AA%8C%E8%AF%81%E5%9F%9F%E5%90%8D%E5%BD%92%E5%B1%9E"><span class="nav-text">验证域名归属</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%94%A8HTML-tag%E9%AA%8C%E8%AF%81-%E6%8E%A8%E8%8D%90"><span class="nav-text">用HTML tag验证(推荐)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%94%A8DNS%E8%AE%B0%E5%BD%95%E9%AA%8C%E8%AF%81%E7%BD%91%E5%9F%9F%E5%BD%92%E5%B1%9E"><span class="nav-text">用DNS记录验证网域归属</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%94%A8%E6%96%87%E4%BB%B6%E9%AA%8C%E8%AF%81%E7%BD%91%E5%9D%80%E5%BD%92%E5%B1%9E"><span class="nav-text">用文件验证网址归属</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%86%99roboots-txt"><span class="nav-text">写roboots.txt</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9B%B4%E6%96%B0safari%E6%A0%87%E7%AD%BE%E9%A1%B5%E5%9B%BE%E6%A0%87-favicon"><span class="nav-text">更新safari标签页图标(favicon)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BB%A3%E7%A0%81%E9%AB%98%E4%BA%AE"><span class="nav-text">代码高亮</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%82%E8%80%83%E6%96%87%E7%8C%AE%E5%92%8C%E6%A0%87%E9%A2%98%E9%94%9A%E7%82%B9"><span class="nav-text">参考文献和标题锚点</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B0%E5%AD%A6%E5%85%AC%E5%BC%8F"><span class="nav-text">数学公式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%87%AA%E5%8A%A8%E7%94%9F%E6%88%90%E6%96%87%E7%AB%A0%E9%93%BE%E6%8E%A5"><span class="nav-text">自动生成文章链接</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B5%8F%E8%A7%88%E8%AE%A1%E6%95%B0"><span class="nav-text">浏览计数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B4%E4%B8%AA%E7%BD%91%E7%AB%99%E7%9A%84%E6%B5%8F%E8%A7%88%E4%BA%BA%E6%95%B0%E5%92%8C%E6%AC%A1%E6%95%B0%E7%BB%9F%E8%AE%A1"><span class="nav-text">整个网站的浏览人数和次数统计</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%AF%8F%E4%B8%AA%E6%96%87%E7%AB%A0%E7%9A%84%E6%B5%8F%E8%A7%88%E6%AC%A1%E6%95%B0%E7%BB%9F%E8%AE%A1"><span class="nav-text">每个文章的浏览次数统计</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%8A%A5%E9%94%99"><span class="nav-text">报错</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#gyp-ERR-stack-Error-gyp-failed-with-exit-code-1"><span class="nav-text">gyp ERR! stack Error: gyp failed with exit code: 1</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ENOTEMPTY-directory-not-empty"><span class="nav-text">ENOTEMPTY: directory not empty</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="∞亼"
      src="/images/heat.jpg">
  <p class="site-author-name" itemprop="name">∞亼</p>
  <div class="site-description" itemprop="description">一切节约归根到底是时间的节约</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">87</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">19</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/hyliang96" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;hyliang96" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:hyliang96@gmail.com" title="E-Mail → mailto:hyliang96@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="返回顶部">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    

  <a href="https://github.com/hyliang96" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://hyliang96.github.io/posts/b27b9f95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/heat.jpg">
      <meta itemprop="name" content="∞亼">
      <meta itemprop="description" content="一切节约归根到底是时间的节约">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="丹炉志">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          hexo博客搭建与升级
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-08-02 01:24:20" itemprop="dateCreated datePublished" datetime="2021-08-02T01:24:20+08:00">2021-08-02</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2024-07-25 20:15:15" itemprop="dateModified" datetime="2024-07-25T20:15:15+08:00">2024-07-25</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%99%A8/" itemprop="url" rel="index"><span itemprop="name">器</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%99%A8/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/" itemprop="url" rel="index"><span itemprop="name">博客搭建</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
  
  <span class="post-meta-item">
    
    <span class="post-meta-item-icon">
      <i class="far fa-comment"></i>
    </span>
    <span class="post-meta-item-text">Waline：</span>
  
    <a title="waline" href="/posts/b27b9f95/#waline-comments" itemprop="discussionUrl">
      <span class="post-comments-count waline-comment-count" id="/posts/b27b9f95/" data-xid="/posts/b27b9f95/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>18k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1:01</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/26625249">GitHub+Hexo 搭建个人网站详细教程</a></p>
<p><a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/1520557">hexo博客搭建教程</a></p>
<h1 id="安装环境"><a class="header-anchor" href="#安装环境"></a>安装环境</h1>
<h2 id="node"><a class="header-anchor" href="#node"></a>node</h2>
<p>node.js, 简称node, 是一个开源与跨平台的JavaScript运行时环境. 博客框架hexo依赖node环境.</p>
<h3 id="安装node"><a class="header-anchor" href="#安装node"></a>安装node</h3>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">brew <span class="token function">install</span> node<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>这一命令同时安装了<code>node</code>, 及其node的默认包管理器<code>npm</code></p>
<h2 id="npm"><a class="header-anchor" href="#npm"></a>npm</h2>
<p>npm是node的默认包管理器</p>
<h3 id="安装npm"><a class="header-anchor" href="#安装npm"></a>安装npm</h3>
<p>在前面安装node时, 也自动同时安装了npm</p>
<h3 id="修改npm源"><a class="header-anchor" href="#修改npm源"></a>修改npm源</h3>
<p>国外的NPM源并不稳定，即使翻墙也不一定能将Hexo下载下来，所以这里将npm全局修改为淘宝源</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> config <span class="token builtin class-name">set</span> registry https://registry.npm.taobao.org<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>查看源是否可有</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> info underscore<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>如果上面配置正确这个命令会有字符串response. 不然会有如下的报错:</p>
<pre class="line-numbers language-none"><code class="language-none">npm ERR! registry error parsing json
npm ERR! Unexpected end of JSON input<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>换回官方的源</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> config <span class="token builtin class-name">set</span> registry https://registry.npmjs.org/<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>查看源的url</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> config get registry<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h3 id="npm使用"><a class="header-anchor" href="#npm使用"></a>npm使用</h3>
<p>装包</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">npm</span> i<span class="token punctuation">[</span>nstall<span class="token punctuation">]</span> -g <span class="token operator">&lt;</span>包名<span class="token operator">></span> <span class="token comment"># -g 表示全局装包, 必需有sudo权限</span>
<span class="token function">sudo</span> <span class="token function">npm</span> <span class="token function">install</span> --save <span class="token comment"># 安装 package.json 中的npm包</span>
<span class="token function">npm</span> i<span class="token punctuation">[</span>nstall<span class="token punctuation">]</span> <span class="token operator">&lt;</span>包名<span class="token operator">></span> --save <span class="token comment"># 仅当前项目装包, --save或-S, 表示将包的变更, 保存到当前项目根目录/package.json</span>
<span class="token function">npm</span> <span class="token function">install</span> --save <span class="token comment"># 安装 package.json 中的npm包</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>删包</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">npm</span> un<span class="token punctuation">[</span>install<span class="token punctuation">]</span> -g <span class="token operator">&lt;</span>包名<span class="token operator">></span> <span class="token comment"># -g 表示全局删包, 必需有sudo权限</span>
<span class="token function">npm</span> un<span class="token punctuation">[</span>install<span class="token punctuation">]</span> <span class="token operator">&lt;</span>包名<span class="token operator">></span> --save <span class="token comment"># 仅当前项目删包, --save或-S, 表示将包的变更, 保存到当前项目根目录/package.json</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>查看包</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">ls</span> <span class="token punctuation">[</span>--depth <span class="token operator">&lt;</span>n<span class="token operator">></span><span class="token punctuation">]</span> <span class="token comment"># 包的嵌套展开到第n层</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="hexo"><a class="header-anchor" href="#hexo"></a>hexo</h2>
<h3 id="安装hexo"><a class="header-anchor" href="#安装hexo"></a>安装hexo</h3>
<p>安装全局的hexo-cli</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> -g hexo-cli<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h1 id="初始配置"><a class="header-anchor" href="#初始配置"></a>初始配置</h1>
<h2 id="创建hexo项目"><a class="header-anchor" href="#创建hexo项目"></a>创建hexo项目</h2>
<p>创建hexo项目文件夹</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hexo init <span class="token operator">&lt;</span>hexo根目录<span class="token operator">></span> <span class="token comment"># 创建新hexo项目文件夹</span>
<span class="token builtin class-name">cd</span> <span class="token operator">&lt;</span>hexo根目录<span class="token operator">></span>
<span class="token function">npm</span> <span class="token function">install</span> --save <span class="token comment"># 安装 package.json 中的npm包</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<h2 id="git配置"><a class="header-anchor" href="#git配置"></a>git配置</h2>
<p>在github网页创建新repo <code>&lt;github-repo-name&gt;</code></p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> init
<span class="token function">git</span> <span class="token function">add</span> -A <span class="token builtin class-name">.</span>
<span class="token function">git</span> commit -m <span class="token string">'first commit'</span>
<span class="token function">git</span> remote <span class="token function">add</span> origin git@github.com:<span class="token operator">&lt;</span>github-username<span class="token operator">></span>/<span class="token operator">&lt;</span>github-repo-name<span class="token operator">></span>.git
<span class="token function">git</span> push -u origin master<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="安装npm包"><a class="header-anchor" href="#安装npm包"></a>安装npm包</h2>
<p>在<code>&lt;新hexo根目录&gt;</code>运行, 以下配置需要hexo&gt;=5.0, next&gt;=8</p>
<p>以下配置</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># 搜索引擎站点地图生成</span>
<span class="token function">npm</span> <span class="token function">install</span> hexo-generator-sitemap --save
<span class="token function">npm</span> <span class="token function">install</span> hexo-generator-baidu-sitemap --save
<span class="token comment"># 站点地图主动推送给百度</span>
<span class="token function">npm</span> <span class="token function">install</span> hexo-baidu-url-submit --save
<span class="token comment"># 换主题</span>
<span class="token function">npm</span> uninstall hexo-theme-landscape --save
<span class="token function">npm</span> <span class="token function">install</span> hexo-theme-next --save
<span class="token comment">## 代码高亮: 使用next不自带的prism主题, 才需要安装</span>
<span class="token comment"># npm install prism-themes --save</span>
<span class="token comment"># 评论区</span>
<span class="token function">npm</span> <span class="token function">install</span> @waline/hexo-next --save
<span class="token comment"># npm install hexo-next-valine --save</span>
<span class="token comment"># 部署器</span>
<span class="token function">npm</span> <span class="token function">install</span> hexo-deployer-git --save
<span class="token comment"># 图像懒加载</span>
<span class="token function">npm</span> <span class="token function">install</span> lozad --save
<span class="token comment"># 渲染本地图像</span>
<span class="token function">npm</span> <span class="token function">install</span> github:hyliang96/hexo-asset-image --save <span class="token comment"># 与hexo-abbrlink兼容，与hexo5兼容</span>
<span class="token comment"># 计时器</span>
<span class="token function">npm</span> <span class="token function">install</span> hexo-symbols-count-time --save
<span class="token comment"># 本地搜索</span>
<span class="token function">npm</span> <span class="token function">install</span> hexo-generator-searchdb --save
<span class="token comment"># 渲染器</span>
<span class="token function">npm</span> uninstall hexo-renderer-marked --save <span class="token comment"># 卸载默认渲染器,</span>
<span class="token function">npm</span> <span class="token function">install</span> hexo-renderer-markdown-it --save <span class="token comment"># 新渲染器, 支持参考文献引用和章节标题的锚点</span>
<span class="token comment">## npm install markdown-it-mathjax --save # 公式渲染插件, 无需安装, next>=8 自带公式渲染器</span>
<span class="token comment"># 文章摘要</span>
<span class="token function">npm</span> <span class="token function">install</span> hexo-excerpt --save          <span class="token comment"># 按限量个html的tag来截取</span>
<span class="token comment">## npm install hexo-auto-excerpt --save  # 按限量字符截取</span>
<span class="token comment"># 玩偶</span>
<span class="token function">npm</span> <span class="token function">install</span> hexo-helper-live2d --save
<span class="token function">npm</span> <span class="token function">install</span> live2d-widget-model-tororo --save
<span class="token comment"># 检查坏了的链接文件</span>
<span class="token comment"># npm install hexo-broken-links-checker --save</span>
<span class="token comment"># 自动生成文章链接</span>
<span class="token function">npm</span> <span class="token function">install</span> github:hyliang96/hexo-abbrlink --save
<span class="token comment"># 支持.textpack压缩包文件(内含插入的图片)</span>
<span class="token comment"># npm install hexo-renderer-textpack --save</span>
<span class="token comment"># 文章置顶, 可以置顶多篇文章, 在要置顶的文章的title写"sticky: xxx", xxx是数字, 如100, 越大越往上排</span>
<span class="token function">npm</span> <span class="token function">install</span> hexo-generator-index --save<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="关于配置文件的说明"><a class="header-anchor" href="#关于配置文件的说明"></a>关于配置文件的说明</h2>
<ul>
<li>
<p>迁移配置文件：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># 在新hexo根目录下</span>
<span class="token function">cp</span> <span class="token operator">&lt;</span>旧hexo根目录<span class="token operator">></span>/_config.yml _config.yml<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
</li>
</ul>
<p>从hexo&gt;=5.0开始, 就能实现主题配置 与 主题项目目录 相隔离:</p>
<ul>
<li>
<p><a target="_blank" rel="noopener" href="https://theme-next.js.org/docs/getting-started/installation">安装主题</a>: 不需要像过去一样, 手动git clone主题项目了</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> clone <span class="token operator">&lt;</span>主题的github-repo<span class="token operator">></span> themes/<span class="token operator">&lt;</span>主题名<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>而是直接用npm安装主题, 例如如下安装<code>next</code>主题readme</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> hexo-theme-next@latest --save<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>安装到<code>&lt;hexo根目录&gt;/node_modules/hexo-theme-next/</code>, 这是next的项目文件夹.</p>
<p>不要直接在此文件夹中改配置, 而是在<code>&lt;hexo根目录&gt;</code>和 <code>&lt;hexo根目录&gt;/source/_data</code>下添加用户配置, 去覆盖next项目文件夹的配置.</p>
<p><strong>这样可以实现 主题配置 与 主题项目目录 相分离, 用<code>npm</code>升级主题, 不改变主题配置.</strong></p>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://theme-next.js.org/docs/getting-started/configuration.htm">配置主题</a>: 不需和过去一样修改<code>themes/next/_config.yml</code>, 而是如下操作, 然后编辑<code>_config.next.yml</code></p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># 在新hexo根目录下</span>
<span class="token function">cp</span> <span class="token operator">&lt;</span>旧hexo根目录<span class="token operator">></span>/node_modules/hexo-theme-next/_config.yml _config.next.yml<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
</li>
<li>
<p>在<code>&lt;hexo根目录&gt;/source/_data </code> 添加用户配置, 去覆盖原有配置 (就是说, 用户配置了的变量, 按用户配置来, 用户没有配置的变量, 按默认配置来)</p>
<ul>
<li>
<p>修改背景图像: 参考<a target="_blank" rel="noopener" href="https://www.snowmoon.top/2021/02/21/next%E4%B8%BB%E9%A2%98%E7%BE%8E%E5%8C%96/">这篇文章</a> 创建 <code>&lt;hexo根目录&gt;/source/_data/styles.styl</code> , 能起到 ``&lt;hexo根目录&gt;/node_modules/hexo-next-theme/source/css/_custom/custom.styl` 的作用</p>
</li>
<li>
<p>修改字体: 参考<a target="_blank" rel="noopener" href="https://leay.net/2020/02/14/hexo-next-font/">这篇文章</a> 创建 <code>&lt;hexo根目录&gt;/source/_data/variables.styl</code>, 能覆盖 <code>&lt;hexo根目录&gt;/node_modules/hexo-next-theme/source/css/_variables/*.styl</code> 中的默认配置</p>
</li>
<li>
<p>启用上述修改: 在<code>_config.next.yml</code> 中将上述改过的文件接触注释:</p>
<pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">custom_file_path</span><span class="token punctuation">:</span>
  <span class="token comment">#head: source/_data/head.njk</span>
  <span class="token comment">#header: source/_data/header.njk</span>
  <span class="token comment">#sidebar: source/_data/sidebar.njk</span>
  <span class="token comment">#postMeta: source/_data/post-meta.njk</span>
  <span class="token comment">#postBodyEnd: source/_data/post-body-end.njk</span>
  <span class="token comment">#footer: source/_data/footer.njk</span>
  <span class="token comment">#bodyEnd: source/_data/body-end.njk</span>
  <span class="token comment">#variable: source/_data/variables.styl</span>
  <span class="token comment">#mixin: source/_data/mixins.styl</span>
  <span class="token key atrule">style</span><span class="token punctuation">:</span> source/_data/styles.styl<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</li>
<li>
<p>设置博客菜单(menu)中条目的中文名: 在<code>&lt;hexo根目录&gt;/source/_data/languages.yml</code> 设置的menu中文名如下, 只需要添加要修改中文名的条目, 不用把 <code>&lt;hexo根目录&gt;/themes/next/anguages/zh-CN.yml </code> 全部粘过来再改, 也不用直接改后者文件. 这一修改, 无需在 <code>_config.next.yml</code> 中<code>custom_file_path:</code>项将<code>languages.yml</code>接触注释, 这是<code>hexo</code>自带的功能, 详见<a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues/3595">hexo的language.yml</a>和<a target="_blank" rel="noopener" href="https://github.com/theme-next/hexo-theme-next/issues/974">next的language.yml</a>.</p>
<pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">zh-CN</span><span class="token punctuation">:</span>
  <span class="token key atrule">menu</span><span class="token punctuation">:</span>
    <span class="token key atrule">home</span><span class="token punctuation">:</span> 首页
    <span class="token key atrule">archives</span><span class="token punctuation">:</span> 时序
    <span class="token key atrule">categories</span><span class="token punctuation">:</span> 分类
    <span class="token key atrule">tags</span><span class="token punctuation">:</span> 标签
    <span class="token key atrule">about</span><span class="token punctuation">:</span> 关于
    <span class="token key atrule">search</span><span class="token punctuation">:</span> 搜索
    <span class="token key atrule">philosophy</span><span class="token punctuation">:</span> 道
    <span class="token key atrule">academics</span><span class="token punctuation">:</span> 术
    <span class="token key atrule">tools</span><span class="token punctuation">:</span> 器
    <span class="token key atrule">book</span><span class="token punctuation">:</span> 书
    <span class="token key atrule">movie</span><span class="token punctuation">:</span> 影
    <span class="token key atrule">photo</span><span class="token punctuation">:</span> 相
    <span class="token key atrule">essay</span><span class="token punctuation">:</span> 杂谈
    <span class="token key atrule">schedule</span><span class="token punctuation">:</span> 日程
    <span class="token key atrule">sitemap</span><span class="token punctuation">:</span> 站点地图
    <span class="token key atrule">commonweal</span><span class="token punctuation">:</span> 公益 404<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</li>
</ul>
</li>
</ul>
<h2 id="迁移博客"><a class="header-anchor" href="#迁移博客"></a>迁移博客</h2>
<h3 id="迁移配置"><a class="header-anchor" href="#迁移配置"></a>迁移配置</h3>
<p>若从hexo&lt;5的旧博客, 迁移到hexo5的新博客, 需要参照旧博客填写新博客的<code>&#123;_config.yml,_config.next.yml&#125;</code></p>
<p>若从hexo5的旧博客, 迁移到hexo5的新博客, 则运行如下命令</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># 在新hexo根目录下</span>
<span class="token assign-left variable">old_hexo_dir</span><span class="token operator">=</span>xxxxx
<span class="token function">cp</span> <span class="token variable">$&#123;old_hexo_dir&#125;</span>/<span class="token punctuation">&#123;</span>_config.yml,_config.next.yml<span class="token punctuation">&#125;</span> <span class="token builtin class-name">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<h3 id="迁移内容"><a class="header-anchor" href="#迁移内容"></a>迁移内容</h3>
<p>若此博客要完全迁移内容, 则则执行如下命令, 而后不用做后续的所有操作</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">cp</span> <span class="token variable">$&#123;old_hexo_dir&#125;</span>/source/* <span class="token builtin class-name">source</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>若此仅把旧博客的板式迁移到新博客, 则执行如下命令, 而后要做后续的所有操作</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">cp</span> <span class="token variable">$&#123;old_hexo_dir&#125;</span>/source/<span class="token punctuation">&#123;</span>_data,categories,tags,about<span class="token punctuation">&#125;</span> <span class="token builtin class-name">source</span>
<span class="token function">mkdir</span> source/images<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h3 id="修改配置"><a class="header-anchor" href="#修改配置"></a>修改配置</h3>
<p>修改<code>_config.yml</code></p>
<pre class="line-numbers language-none"><code class="language-none">108:  repository: git@github.com:hyliang96&#x2F;hyliang96.github.io.git
215:  serverURL: https:&#x2F;&#x2F;waline-hyliang96.vercel.app # Waline server address url<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>修改<code>_config.next.yml</code></p>
<pre class="line-numbers language-none"><code class="language-none">153:  GitHub: https:&#x2F;&#x2F;github.com&#x2F;hyliang96 || fab fa-github
154:  E-Mail: mailto:hyliang96@gmail.com || fa fa-envelope

409:  permalink: https:&#x2F;&#x2F;github.com&#x2F;hyliang96<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>修改<code>_config.next.yml</code>并更换图标</p>
<pre class="line-numbers language-none"><code class="language-none">52:favicon:
53:  small: &#x2F;images&#x2F;favicon16.png
54:  medium: &#x2F;images&#x2F;favicon32.png
55:  # small: &#x2F;images&#x2F;inftyset-favicon-16x16-next.png
56:  # medium: &#x2F;images&#x2F;inftyset-favicon-32x32-next.png
57:  apple_touch_icon: &#x2F;images&#x2F;favicon.png
58:  safari_pinned_tab: &#x2F;images&#x2F;favicon.svg

139:  url: &#x2F;images&#x2F;heat.jpg

271:  wechatpay: &#x2F;images&#x2F;wechatpay.jpg
272:  alipay: &#x2F;images&#x2F;alipay.jpg<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>修改<code>source/_data/styles.styl</code>, 并更换背景图像</p>
<pre class="line-numbers language-none"><code class="language-none">background:url(&#x2F;images&#x2F;backgroud.png);<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h3 id="评论区和浏览计数"><a class="header-anchor" href="#评论区和浏览计数"></a>评论区和浏览计数</h3>
<p>先后参考<a href="#%E8%AF%84%E8%AE%BA%E5%8C%BA">评论区</a>和<a href="#%E6%B5%8F%E8%A7%88%E8%AE%A1%E6%95%B0">浏览计数</a>去配置</p>
<p>然后配置<code>_config.yml</code></p>
<pre class="line-numbers language-none"><code class="language-none">215:  serverURL: https:&#x2F;&#x2F;xxx-xxx.xxx.app # Waline server address url<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>配置<code>_config.next.yml</code></p>
<pre class="line-numbers language-yml" data-language="yml"><code class="language-yml"><span class="token key atrule">leancloud_visitors</span><span class="token punctuation">:</span>
  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">app_id</span><span class="token punctuation">:</span> 5JGxxxxxxI
  <span class="token key atrule">app_key</span><span class="token punctuation">:</span> Jv9xxxxxxEq7<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="配置域名和搜索引擎"><a class="header-anchor" href="#配置域名和搜索引擎"></a>配置域名和搜索引擎</h3>
<p>在Freenom域名注册域名, 在cloudflare转发此域名, 然后参考<a href="#%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E">搜索引擎</a>配置搜索引擎</p>
<p><code>_config.yml</code></p>
<pre class="line-numbers language-none"><code class="language-none">16:url: https:&#x2F;&#x2F;blog.lianghy.ml
251:  host: https:&#x2F;&#x2F;blog.lianghy.ml    # 在百度站长平台中添加的域名<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p><code>_config.next.yml</code></p>
<pre class="line-numbers language-none"><code class="language-none">482:google_site_verification: googleaxxx.html
494:baidu_site_verification: baidu_verify_code-xxxx.html<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>更换文件</p>
<p><code>source/&#123;CNAME,googleaxxx.html,baidu_verify_code-xxxx.html&#125;</code></p>
<h2 id="渲染"><a class="header-anchor" href="#渲染"></a>渲染</h2>
<p>本地预览</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hexo clean <span class="token operator">&amp;&amp;</span> hexo g <span class="token operator">&amp;&amp;</span> hexo s<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="部署到github"><a class="header-anchor" href="#部署到github"></a>部署到github</h2>
<p>部署到<code>https://&lt;github用户名&gt;.github.io</code></p>
<p>依照此<a target="_blank" rel="noopener" href="https://hexo.io/zh-cn/docs/github-pages.html">步骤</a>和<a target="_blank" rel="noopener" href="https://docs.github.com/cn/pages/getting-started-with-github-pages/creating-a-github-pages-site">部署github pages</a>完成github-page的配置</p>
<p>然后在本地<code>&lt;hexo根目录&gt;</code>执行部署</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hexo clean <span class="token operator">&amp;&amp;</span> hexo g <span class="token operator">&amp;&amp;</span> hexo d<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h1 id="升级"><a class="header-anchor" href="#升级"></a>升级</h1>
<p>步骤: 升级node-&gt;升级npm-&gt;</p>
<ul>
<li>小版本升级hexo, 若无法正常渲染, 则另起新的hexo项目再迁移</li>
<li>大版本升级hexo, 若无法正常渲染, 则另起新的hexo项目再迁移</li>
<li>另起新的hexo项目再迁移</li>
</ul>
<h2 id="升级node"><a class="header-anchor" href="#升级node"></a>升级node</h2>
<p><a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903733239742477">npm和node升级的正确方式</a></p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># 查看当前node版本</span>
node -v
<span class="token comment"># 清除npm cache</span>
<span class="token function">sudo</span> <span class="token function">npm</span> cache clean -f
<span class="token comment"># 安装多版本node的管理工具"n"</span>
<span class="token function">sudo</span> <span class="token function">npm</span> <span class="token function">install</span> -g n
<span class="token comment"># 安装最新的稳定版本的node</span>
<span class="token function">sudo</span> n stable
<span class="token comment"># 安装并切换到指定版本的node</span>
<span class="token function">sudo</span> n <span class="token number">12.14</span>.1
<span class="token comment"># 查看所有已经安装的node版本</span>
<span class="token function">sudo</span> node <span class="token function">ls</span>
<span class="token comment"># 返回如下, 不会指明当前使用的node版本, 需要用`node -v`来查看当前使用的node版本</span>
<span class="token comment"># node/12.14.1</span>
<span class="token comment"># node/14.17.4</span>

<span class="token comment"># 查看当前node版本</span>
node -v
<span class="token comment"># 移除指定node版本</span>
<span class="token function">sudo</span> n <span class="token function">rm</span> <span class="token number">14.17</span>.4<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="升级npm"><a class="header-anchor" href="#升级npm"></a>升级npm</h2>
<p>查看版本</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> -v<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>升级到最高版本</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">npm</span> <span class="token function">install</span> npm@latest -g<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="小版本升级hexo"><a class="header-anchor" href="#小版本升级hexo"></a>小版本升级hexo</h2>
<h3 id="升级全局的hexo-cli"><a class="header-anchor" href="#升级全局的hexo-cli"></a>升级全局的hexo-cli</h3>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">npm</span> <span class="token function">install</span> hexo-cli -g<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h3 id="升级项目内所有npm包"><a class="header-anchor" href="#升级项目内所有npm包"></a>升级项目内所有npm包</h3>
<p><a target="_blank" rel="noopener" href="https://www.4spaces.org/how-to-upgrade-hexo/">hexo升级</a></p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># 查看当前hexo版本, 会列出当项目内hexo(及其构成模块) 和 全局hexo-cli 的版本</span>
hexo version
<span class="token comment"># 升级当项目内所有的npm包, 包括hexo在内</span>
<span class="token function">npm</span> update
<span class="token comment"># 查看升级后的hexo版本</span>
hexo version<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="大版本升级hexo"><a class="header-anchor" href="#大版本升级hexo"></a>大版本升级hexo</h2>
<p><a target="_blank" rel="noopener" href="https://tommy.net.cn/2020/08/08/upgrade-hexo-to-v5-0-0/">将 Hexo 升级到 v5.0.0</a></p>
<p>全局安装npm包的大版本升级检查工具<code>ncu</code></p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> npm-check-updates -g<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>在npm项目文件夹内运行<code>ncu</code>, 以查看当前项目中可升级的npm包</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">ncu<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>返回</p>
<pre class="line-numbers language-none"><code class="language-none">Checking &#x2F;Users&#x2F;tommy&#x2F;blog&#x2F;package.json
[&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;] 16&#x2F;16 100%

 hexo                    ^4.2.0  →  ^5.0.0
 hexo-generator-sitemap  ^2.0.0  →  ^2.1.0<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>执行升级</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">ncu -u<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>返回</p>
<pre class="line-numbers language-none"><code class="language-none">Upgrading &#x2F;Users&#x2F;tommy&#x2F;blog&#x2F;package.json
[&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;] 16&#x2F;16 100%

 hexo                    ^4.2.0  →  ^5.0.0
 hexo-generator-sitemap  ^2.0.0  →  ^2.1.0

Run npm install to install new versions.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>当前项目中可升级的npm包</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">mv</span> node_modules node_modules_old
<span class="token function">npm</span> <span class="token function">install</span> --save<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h2 id="另起新的hexo项目再迁移"><a class="header-anchor" href="#另起新的hexo项目再迁移"></a>另起新的hexo项目再迁移</h2>
<h3 id="创建新hexo项目文件夹"><a class="header-anchor" href="#创建新hexo项目文件夹"></a>创建新hexo项目文件夹</h3>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hexo init <span class="token operator">&lt;</span>新hexo根目录<span class="token operator">></span> <span class="token comment"># 创建新hexo项目文件夹</span>
<span class="token builtin class-name">cd</span> <span class="token operator">&lt;</span>新hexo根目录<span class="token operator">></span>
<span class="token function">npm</span> <span class="token function">install</span> --save <span class="token comment"># 安装 package.json 中的npm包</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<h3 id="移动源文件"><a class="header-anchor" href="#移动源文件"></a>移动源文件</h3>
<p>在<code>&lt;新hexo根目录&gt;</code>运行</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">rm</span> <span class="token punctuation">&#123;</span>scaffolds,source,source,README.md<span class="token punctuation">&#125;</span> -rf
<span class="token function">cp</span> <span class="token operator">&lt;</span>旧hexo根目录<span class="token operator">></span>/<span class="token punctuation">&#123;</span>scaffolds,source,source<span class="token punctuation">&#125;</span> <span class="token builtin class-name">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h3 id="重新安装npm包"><a class="header-anchor" href="#重新安装npm包"></a>重新安装npm包</h3>
<p>与上文 <a href="#%E5%AE%89%E8%A3%85npm%E5%8C%85">安装npm包</a> 小节相同</p>
<h3 id="配置新文件"><a class="header-anchor" href="#配置新文件"></a>配置新文件</h3>
<p>hexo配置:</p>
<ul>
<li>参照<code>&lt;旧hexo根目录&gt;/_config.yml</code>, 逐行修改<code>&lt;新hexo根目录&gt;/_config.yml</code></li>
</ul>
<p>next主题配置:</p>
<ul>
<li>
<p>将最新安装的next的配置文件拷贝到<code>新hexo根目录&gt;</code>: 在<code>&lt;新hexo根目录&gt;</code>运行如下命令</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">cp</span> node_modules/hexo-theme-next/_config.yml _config.next.yml<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li>
<p>参照<code>&lt;旧hexo根目录&gt;/_config.next.yml</code>, 逐行修改<code>&lt;新hexo根目录&gt;/_config.next.yml</code></p>
</li>
</ul>
<h3 id="本地渲染并调试bug"><a class="header-anchor" href="#本地渲染并调试bug"></a>本地渲染并调试bug</h3>
<p>通常大版本升级, 会与旧的配置, npm包不兼容, 需要调试bug</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hexo clean <span class="token operator">&amp;&amp;</span> hexo g <span class="token operator">&amp;&amp;</span> hexo s<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h3 id="重新git配置"><a class="header-anchor" href="#重新git配置"></a>重新git配置</h3>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">cp</span> <span class="token operator">&lt;</span>旧hexo根目录<span class="token operator">></span>/.gitignore <span class="token builtin class-name">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>然后与上文<a href="#git%E9%85%8D%E7%BD%AE">git配置</a>相同, 注意, 要创建新的 <code>&lt;github-repo-name&gt;</code>, 不要和旧hexo项目的 <code>&lt;github-repo-name&gt;</code>相同, 不然会带上git臃肿的历史数据.</p>
<h1 id="插件安装说明"><a class="header-anchor" href="#插件安装说明"></a>插件安装说明</h1>
<h2 id="插件推荐与参考"><a class="header-anchor" href="#插件推荐与参考"></a>插件推荐与参考</h2>
<p><a target="_blank" rel="noopener" href="https://hexo.io/plugins/">hexo插件查询网站</a></p>
<p><a target="_blank" rel="noopener" href="https://tding.top/archives/42c38b10.html">hexo-next插件配置参考</a></p>
<p><a target="_blank" rel="noopener" href="https://zhouyuqian.com/2020/03/06/hexo-%E7%BE%8E%E5%8C%96/">hexo-next插件配置参考</a></p>
<h2 id="评论区"><a class="header-anchor" href="#评论区"></a>评论区</h2>
<p>valine是轻量级的第三方评论模块, 后台是<a target="_blank" rel="noopener" href="https://leancloud.app">LeanCloud</a>. 但由于valine有数据泄露的问题, <a target="_blank" rel="noopener" href="https://github.com/next-theme/hexo-theme-next/issues/4">next v8.1.0开始不支持valine</a>, 需要用valine需安装<code>next-theme/hexo-next-valine</code>插件, <a target="_blank" rel="noopener" href="https://github.com/next-theme/hexo-next-valine">详见</a>.</p>
<p>建议使用waline, 它是在valine外面裹了一层Vercel.</p>
<ul>
<li>先依照 <a target="_blank" rel="noopener" href="https://waline.js.org/guide/get-started.html#leancloud-%E8%AE%BE%E7%BD%AE-%E6%95%B0%E6%8D%AE%E5%BA%93">waline配置方法</a>配置LeanCloud（使用国际版）和Vercel</li>
<li>再依照<a target="_blank" rel="noopener" href="https://www.npmjs.com/package/@waline/hexo-next">@waline/hexo-next</a>安装npm插件和配置插件.
<ul>
<li>其中的<code>serverURL</code>的获得: 访问<code>https://vercel.com/&lt;你的&gt;/waline</code>, 在如下位置选区任意一个url即可</li>
</ul>
</li>
</ul>
<p><img data-src="/posts/b27b9f95/image-20210803005919113.png" alt="image-20210803005919113"></p>
<ul>
<li>访问<code>&lt;serverURL&gt;/ui</code>, 首次注册的用户, 会成为此waline项目的管理员, 可以删评论</li>
</ul>
<h2 id="搜索引擎"><a class="header-anchor" href="#搜索引擎"></a>搜索引擎</h2>
<p><a target="_blank" rel="noopener" href="https://asurada.zone/post/Blog-Search-Engine-Index/">Hexo 博客主流搜索引擎收录详细指南</a></p>
<p>操作详见<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/100922816">参考</a> <a target="_blank" rel="noopener" href="https://asurada.zone/post/Blog-Search-Engine-Index/">参考</a></p>
<h3 id="添加哪个域名"><a class="header-anchor" href="#添加哪个域名"></a>添加哪个域名</h3>
<p>google search console 需要把<code>https://&lt;用户名&gt;.github.io</code>（选<code>网址前缀</code>）添加为站点；不然若用自己注册的域名，添加sitemap.xml会显示“无法获取“。<a target="_blank" rel="noopener" href="https://www.cxyzjd.com/article/weixin_43971764/96754325">详见</a></p>
<p>百度站长需要把自己注册的域名添加为站点；不然若用<code>https://&lt;用户名&gt;.github.io</code>，会如下报错</p>
<blockquote>
<p>该站点为低质站点，暂不可添加，请持续优化后，再行尝试</p>
</blockquote>
<p>或</p>
<blockquote>
<p>该主域可添加站点数量超过限制，无法添加更多站点。如您仍需要添加站点，请在已添加站点中删除部分站点后重试。</p>
</blockquote>
<p>必须给它套一层自己的域名，才能添加成功。</p>
<h3 id="验证域名归属"><a class="header-anchor" href="#验证域名归属"></a>验证域名归属</h3>
<h4 id="用HTML-tag验证-推荐"><a class="header-anchor" href="#用HTML-tag验证-推荐"></a>用HTML tag验证(推荐)</h4>
<p>google：</p>
<p><img data-src="/posts/b27b9f95/search-console-verification-code.png" alt="Google网站验证：使用Search Console验证网站的9种方法– 维修指南"></p>
<p>百度：</p>
<p><img data-src="/posts/b27b9f95/1567136478962442.jpg" alt="在百度站长平台上完成“网站验证”详细步骤"></p>
<p>修改<code>_config.next.yml</code>：</p>
<pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">google_site_verification</span><span class="token punctuation">:</span> &lt;google粘贴到这里<span class="token punctuation">></span>
<span class="token key atrule">baidu_site_verification</span><span class="token punctuation">:</span> &lt;baidu粘贴到这里<span class="token punctuation">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h4 id="用DNS记录验证网域归属"><a class="header-anchor" href="#用DNS记录验证网域归属"></a>用DNS记录验证网域归属</h4>
<p>在google验证网域归属时, 需要创建txt类型的dns, 方法如下:</p>
<p>在Google Search Concole, 选择验证网域归属, 点<code>复制</code></p>
<p><img data-src="/posts/b27b9f95/iShot2021-08-03%2004.35.43.png" alt="iShot2021-08-03 04.35.43"></p>
<p>然后前往域名管理网站, 如cloudflare, 添加<code>类型</code>为TXT的一条域名, <code>名称</code>与博客网址的<code>名称</code>相同, <code>内容</code>为剪切板内容.</p>
<p><img data-src="/posts/b27b9f95/%E6%9C%AA%E5%91%BD%E5%90%8D.png" alt="未命名"></p>
<h4 id="用文件验证网址归属"><a class="header-anchor" href="#用文件验证网址归属"></a>用文件验证网址归属</h4>
<p>其中在验证网址归属的时候, 若使用文件来验证, 请将下载的<code>xxx.html</code>文件复制到<code>&lt;hexo根目录&gt;/xxx.html</code>, 并在文件开头加上如下内容, 以便使<code>hexo g</code>时<strong>不把此文件渲染成一个博客页面</strong>, 而是直接把文件原有内容为<code>博客网址/xxx.html</code>纯文本文件. 可<code>hexo d</code>然后访问<code>博客网址/xxx.html</code>查看是否是纯文本.</p>
<pre class="line-numbers language-none"><code class="language-none">---
layout: false
---
文件原有内容<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="写roboots-txt"><a class="header-anchor" href="#写roboots-txt"></a>写roboots.txt</h3>
<p><a target="_blank" rel="noopener" href="https://mikolaje.github.io/2019/hexo_seo.html">详见</a></p>
<p>写<code>&lt;hexo根目录&gt;/source/robots.txt</code>以告诉搜索引擎的爬虫要爬我这网站的那些内容</p>
<p>因为现在（2019-09以后）Google Search默认是用智能手机引擎来抓取, 写robots.txt时 不要写<code>Disallow</code>, 因为如果js和fonts这些加了disallow的话，会出现谷歌抓取问题</p>
<pre class="line-numbers language-yml" data-language="yml"><code class="language-yml"><span class="token key atrule">User-agent</span><span class="token punctuation">:</span> *

<span class="token comment"># 就是告诉搜索引擎的爬虫要爬我这网站的那些内容。</span>
<span class="token key atrule">Allow</span><span class="token punctuation">:</span> /
<span class="token key atrule">Allow</span><span class="token punctuation">:</span> /archives/
<span class="token key atrule">Allow</span><span class="token punctuation">:</span> /categories/
<span class="token key atrule">Allow</span><span class="token punctuation">:</span> /tags/
<span class="token key atrule">Allow</span><span class="token punctuation">:</span> /about/

<span class="token comment"># 因为现在（2019-09以后）Google Search默认是用智能手机引擎来抓取，</span>
<span class="token comment"># 所以如果js和css这样被disallow的话会有问题，建议还是把上面的disallow去掉。</span>
<span class="token comment"># 参见: https :// mikolaje .github . io/2019/ hexo_seo . html</span>
<span class="token comment"># Disallow: /js/</span>
<span class="token comment"># Disallow: /fonts/</span>
<span class="token comment"># Disallow: /css/</span>
<span class="token comment"># Disallow: /live2dw/</span>
<span class="token comment"># Disallow: /vendors/</span>

<span class="token key atrule">Sitemap</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//blog.lianghy.ml/sitemap.xml
<span class="token key atrule">Sitemap</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//blog.lianghy.ml/baidu_sitemap.xml<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="更新safari标签页图标-favicon"><a class="header-anchor" href="#更新safari标签页图标-favicon"></a>更新safari标签页图标(favicon)</h2>
<p>在<code>_config.next.yml</code>配置过favicon后, 重新<code>hexo g &amp;&amp; hexo s</code>, safari可能不更新标签页图标(favicon), 但其他浏览器会立即更新.  <a target="_blank" rel="noopener" href="https://www.macworld.com/article/233243/how-to-refresh-the-tiny-tab-icons-in-safari-when-they-start-disappearing.html">这篇</a>给出了方法让safari 更新favicon, 但我试了, 对其他网页有用, 对我的hexo(5.4.0)next(8.6.1)的博客没有用.</p>
<h2 id="代码高亮"><a class="header-anchor" href="#代码高亮"></a>代码高亮</h2>
<p>hexo&gt;=5, 参考<a target="_blank" rel="noopener" href="https://theme-next.js.org/highlight/">预览高亮方案</a>, 选择喜欢的方案, 参照其上的代码, 去配置  <code>_config.yml</code> 和 <code>_config.next.yml</code></p>
<p>若选的prism高亮方案, 不是next自带的, 需要安装<code>prism-themes</code>插件</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> prism-themes<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="参考文献和标题锚点"><a class="header-anchor" href="#参考文献和标题锚点"></a>参考文献和标题锚点</h2>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> uninstall hexo-renderer-marked --save <span class="token comment"># 卸载默认渲染器</span>
<span class="token function">npm</span> <span class="token function">install</span> hexo-renderer-markdown-it --save <span class="token comment"># 新渲染器, 支持参考文献引用和章节标题的锚点</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p><code>hexo-renderer-markdown-it</code> 支持把 footnote 渲染成文尾<strong>自动编号</strong>的参考文献, 还能为每个章节标题添加一个锚点, 点击一下锚点, 就能在浏览器的网址栏里跳转成此标题的url, 以便复制分享. 但是, 点击锚点并不能自动把锚点的url复制到剪切板. <a target="_blank" rel="noopener" href="https://zhanghuimeng.github.io/post/add-footnote-plugin-for-hexo-blog/">详见</a></p>
<p>以下是我的配置</p>
<pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml">
<span class="token comment"># Markdown-it config</span>
<span class="token comment"># hexo默认的渲染插件 hexo-renderer-marked 的替代插件</span>
<span class="token comment">## Docs: https://github.com/celsomiranda/hexo-renderer-markdown-it/wiki</span>
<span class="token key atrule">markdown</span><span class="token punctuation">:</span>
  <span class="token comment"># preset: 'default'</span>
  <span class="token comment"># 渲染设置</span>
  <span class="token key atrule">render</span><span class="token punctuation">:</span>
    <span class="token comment"># 置为true时，html内容保持不变；置为false时，html内容将被转义成普通字符串</span>
    <span class="token key atrule">html</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token comment"># 是否生成与XHTML完全兼容的标签（虽然我不懂是什么意思）</span>
    <span class="token key atrule">xhtmlOut</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
    <span class="token comment"># 置为true时，每个换行符都被渲染成一个&lt;br>（即Hexo的默认表现）；置为false时，只有空行才会被渲染为&lt;br>（GFM的默认表现）</span>
    <span class="token key atrule">breaks</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token comment"># 是否自动识别链接并把它渲染成链接</span>
    <span class="token key atrule">linkify</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token comment"># 是否自动识别印刷格式（意思是把(c)渲染为©这样的）</span>
    <span class="token key atrule">typographer</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token comment"># 如果typographer被设置为true，则该选项用于设置将dumb quotes（""）自动替换为smart quotes</span>
    <span class="token key atrule">quotes</span><span class="token punctuation">:</span> <span class="token string">'“”‘’'</span>
  <span class="token comment"># 设置所需插件</span>
  <span class="token key atrule">plugins</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> markdown<span class="token punctuation">-</span>it<span class="token punctuation">-</span>abbr
    <span class="token punctuation">-</span> markdown<span class="token punctuation">-</span>it<span class="token punctuation">-</span>footnote
    <span class="token punctuation">-</span> markdown<span class="token punctuation">-</span>it<span class="token punctuation">-</span>ins
    <span class="token comment"># - markdown-it-sub</span>
    <span class="token comment"># - markdown-it-sup</span>
    <span class="token punctuation">-</span> markdown<span class="token punctuation">-</span>it<span class="token punctuation">-</span>mathjax
    <span class="token comment"># - hexo-math</span>
  <span class="token comment"># 文中标题跳转的锚点设置</span>
  <span class="token key atrule">anchors</span><span class="token punctuation">:</span>
    <span class="token comment"># Minimum level for ID creation. (e.g. h2 to h6)</span>
    <span class="token key atrule">level</span><span class="token punctuation">:</span> <span class="token number">1</span>
    <span class="token comment"># A suffix that is prepended to the number given if the ID is repeated.</span>
    <span class="token key atrule">collisionSuffix</span><span class="token punctuation">:</span> <span class="token string">'_'</span>
    <span class="token comment"># If `true`, creates an anchor tag with a permalink besides the heading.</span>
    <span class="token key atrule">permalink</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token comment"># Class used for the permalink anchor tag.</span>
    <span class="token key atrule">permalinkClass</span><span class="token punctuation">:</span> header<span class="token punctuation">-</span>anchor
    <span class="token comment"># Set to 'right' to add permalink after heading</span>
    <span class="token key atrule">permalinkSide</span><span class="token punctuation">:</span> <span class="token string">'left'</span>
    <span class="token comment"># The symbol used to make the permalink 🔗  ¶ § ⦿ •</span>
    <span class="token key atrule">permalinkSymbol</span><span class="token punctuation">:</span> <span class="token string">''</span>
    <span class="token comment"># Transform anchor to (1) lower case; (2) upper case</span>
    <span class="token key atrule">case</span><span class="token punctuation">:</span> <span class="token number">0</span>
    <span class="token comment"># Replace space with a character</span>
    <span class="token key atrule">separator</span><span class="token punctuation">:</span> <span class="token string">'-'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="数学公式"><a class="header-anchor" href="#数学公式"></a>数学公式</h2>
<p>next&gt;=8 自带公式渲染器, 在 <code>_config.next.yml</code> 中如下配置, 无需安装任何公式渲染插件</p>
<pre class="line-numbers language-yml" data-language="yml"><code class="language-yml"><span class="token comment"># Math Formulas Render Support</span>
<span class="token comment"># Warning: Please install / uninstall the relevant renderer according to the documentation.</span>
<span class="token comment"># See: https://theme-next.js.org/docs/third-party-services/math-equations</span>
<span class="token comment"># Server-side plugin: https://github.com/next-theme/hexo-filter-mathjax</span>
<span class="token key atrule">math</span><span class="token punctuation">:</span>
  <span class="token comment"># Default (false) will load mathjax / katex script on demand.</span>
  <span class="token comment"># That is it only render those page which has `mathjax: true` in front-matter.</span>
  <span class="token comment"># If you set it to true, it will load mathjax / katex srcipt EVERY PAGE.</span>
  <span class="token key atrule">every_page</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>

  <span class="token key atrule">mathjax</span><span class="token punctuation">:</span>
    <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token comment"># Available values: none | ams | all, all 表示所有独行公式自动编号</span>
    <span class="token key atrule">tags</span><span class="token punctuation">:</span> all

  <span class="token key atrule">katex</span><span class="token punctuation">:</span>
    <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
    <span class="token comment"># See: https://github.com/KaTeX/KaTeX/tree/master/contrib/copy-tex</span>
    <span class="token key atrule">copy_tex</span><span class="token punctuation">:</span> <span class="token boolean important">false</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>注意, 在<code>_config.yml</code> 中, <code>hexo-renderer-markdown-it</code>  的配置不能开上标和下标</p>
<pre class="line-numbers language-yml" data-language="yml"><code class="language-yml"><span class="token comment"># Markdown-it config</span>
<span class="token comment"># hexo默认的渲染插件 hexo-renderer-marked 的替代插件</span>
<span class="token comment">## Docs: https://github.com/celsomiranda/hexo-renderer-markdown-it/wiki</span>
<span class="token key atrule">markdown</span><span class="token punctuation">:</span>
  <span class="token comment"># 设置所需插件</span>
  <span class="token key atrule">plugins</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> markdown<span class="token punctuation">-</span>it<span class="token punctuation">-</span>abbr
    <span class="token punctuation">-</span> markdown<span class="token punctuation">-</span>it<span class="token punctuation">-</span>footnote
    <span class="token punctuation">-</span> markdown<span class="token punctuation">-</span>it<span class="token punctuation">-</span>ins
    <span class="token comment"># - markdown-it-sup # 不能开， 不然公式中若有 xxx^yyy^zzz, 会无法渲染成公式</span>
    <span class="token comment"># - markdown-it-sub # 不能开， 不然公式中若有 xxx_yyy_zzz, 会无法渲染成公式</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>使用:</p>
<ul>
<li>
<p>行内公式<code>$</code>前后有空格也能渲染, 如<code>$ f(x)=\left \|\dfrac&#123;x^2&#125;&#123;y^2&#125;\right \| $</code>渲染成$ f(x)=\left |\dfrac{x^2}{y^2}\right | $</p>
</li>
<li>
<p>含有中文也能渲染, 如<code>$x_右$ </code>渲染成$x_右$</p>
</li>
<li>
<p><code>$\eqref&#123;eq:sample&#125;$</code> 能渲染成 “$\eqref{eq:sample}$&quot;.</p>
</li>
<li>
<p>独行公式自动有编号</p>
<pre class="line-numbers language-latex" data-language="latex"><code class="language-latex"><span class="token equation string">$$
<span class="token equation-command regex">\int</span>_0^<span class="token equation-command regex">\infty</span> <span class="token equation-command regex">\frac</span>&#123;x^3&#125;&#123;e^x-1&#125; <span class="token equation-command regex">\text</span>&#123;d&#125;x = <span class="token equation-command regex">\frac</span>&#123;<span class="token equation-command regex">\pi</span>^4&#125;&#123;15&#125; <span class="token equation-command regex">\label</span>&#123;eq:sample&#125;
$$</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>渲染为<br>
$$<br>
\int_0^\infty \frac{x^3}{e^x-1} \text{d}x = \frac{\pi^4}{15} \label{eq:sample}<br>
$$</p>
</li>
<li>
<p>独行公式取消编号需要加<code>\notag</code></p>
<pre class="line-numbers language-latex" data-language="latex"><code class="language-latex"><span class="token equation string">$$
<span class="token equation-command regex">\int</span>_0^<span class="token equation-command regex">\infty</span> <span class="token equation-command regex">\frac</span>&#123;x^3&#125;&#123;e^x-1&#125; <span class="token equation-command regex">\text</span>&#123;d&#125;x = <span class="token equation-command regex">\frac</span>&#123;<span class="token equation-command regex">\pi</span>^4&#125;&#123;15&#125; <span class="token equation-command regex">\notag</span>
$$</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>渲染为<br>
$$<br>
\int_0^\infty \frac{x^3}{e^x-1} \text{d}x = \frac{\pi^4}{15} \notag<br>
$$</p>
</li>
<li>
<p>我尝试过的第三方公式插件的问题</p>
</li>
</ul>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># 以下无法渲染:</span>
<span class="token function">npm</span> <span class="token function">install</span> @traptitech/markdown-it-katex --save
<span class="token comment"># 以下和next自带的公式渲染器等效:</span>
<span class="token function">npm</span> <span class="token function">install</span> markdown-it-katex --save
<span class="token function">npm</span> <span class="token function">install</span> markdown-it-mathjax --save
<span class="token function">npm</span> <span class="token function">install</span> markdown-it-mathjax-svg-next --save
<span class="token function">npm</span> <span class="token function">install</span> hexo-renderer-kramed --save
<span class="token function">npm</span> <span class="token function">install</span> hexo-renderer-pandoc --save <span class="token comment"># 渲染太慢</span>
<span class="token comment"># 公式的处理器, 但不渲染, 已经集成到hexo里, 无需安装:</span>
<span class="token function">npm</span> <span class="token function">install</span> hexo-math --save<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="自动生成文章链接"><a class="header-anchor" href="#自动生成文章链接"></a>自动生成文章链接</h2>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/c7de2ae59975">Hexo-abbrlink自动生成唯一永久文章链接</a></p>
<p>安装：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> hexo-abbrlink --save
<span class="token function">npm</span> <span class="token function">install</span> https://github.com/hyliang96/hexo-asset-image --save  <span class="token comment"># 与hexo-abbrlink兼容，与hexo5兼容</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>配置<code>config.yml</code>，推荐配置如下：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">permalink: posts/:abbrlink/ <span class="token comment"># 或 posts/:abbrlink/ 或 :abbrlink.html 或 :abbrlink/ ， 只要结尾是 :abbrlink.html 或 :abbrlink/， hyliang96/hexo-asset-image 皆支持</span>
abbrlink:
abbrlink:
    alg: crc32   <span class="token comment">#算法： crc16(default) and crc32</span>
    rep: hex     <span class="token comment">#进制： dec(default) and hex</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>生成的链接将会是这样的(官方样例)：</p>
<pre class="line-numbers language-none"><code class="language-none">crc16 &amp; hex
https:&#x2F;&#x2F;post.zz173.com&#x2F;posts&#x2F;66c8.html

crc16 &amp; dec
https:&#x2F;&#x2F;post.zz173.com&#x2F;posts&#x2F;65535.html

crc32 &amp; hex
https:&#x2F;&#x2F;post.zz173.com&#x2F;posts&#x2F;8ddf18fb.html

crc32 &amp; dec
https:&#x2F;&#x2F;post.zz173.com&#x2F;posts&#x2F;1690090958.html<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>生成完后，原<code>md</code>文件的Front-matter 内会增加<code>abbrlink</code> 字段，值为生成的ID 。这个字段确保了在我们修改了Front-matter 内的博客标题title或创建日期date字段之后而不会改变链接地址。</p>
<h2 id="浏览计数"><a class="header-anchor" href="#浏览计数"></a>浏览计数</h2>
<h3 id="整个网站的浏览人数和次数统计"><a class="header-anchor" href="#整个网站的浏览人数和次数统计"></a>整个网站的浏览人数和次数统计</h3>
<p>计数<code>busuanzi</code>工具已经预置在<code>next</code>主题内, 无需另外安装, 只需在<code>_config.next.yml</code>中如下配置</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># Show Views / Visitors of the website / page with busuanzi.</span>
<span class="token comment"># For more information: http://ibruce.info/2015/04/04/busuanzi/</span>
busuanzi_count:
  enable: <span class="token boolean">true</span>
  total_visitors: <span class="token boolean">true</span>
  total_visitors_icon: fa fa-user
  total_views: <span class="token boolean">true</span>
  total_views_icon: fa fa-eye
  post_views: <span class="token boolean">false</span>
  post_views_icon: far fa-eye<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>其中<code>post_views</code>填<code>false</code>, 即不使用<code>busuanzi</code>统计文章的浏览次数.</p>
<p>这是因为,  <code>busuanzi</code>会有三个问题, <a target="_blank" rel="noopener" href="https://github.com/next-theme/hexo-theme-next/issues/142">参考</a>:</p>
<ul>
<li>在首页中无法显示各篇文章的浏览次数</li>
<li>因为safari若开启“阻止跨站”, <code>busuanzi</code>统计出的文章浏览次数直接与整个网站的浏览次数相同</li>
</ul>
<p><img data-src="/posts/b27b9f95/99628710-aaca7c80-2a71-11eb-9f9a-2b6ffef38704.png" alt="image"></p>
<ul>
<li>因为safari若开启“阻止跨站”, <code>busuanzi</code>统出的网站浏览人数(下图人头), 在每次刷新或站内切换网页后会加1, 这是按网站浏览次数(下图眼睛)的逻辑去更新了</li>
</ul>
<p><img data-src="/posts/b27b9f95/image-20211220201408902.png" alt="image-20211220201408902"></p>
<p><img data-src="/posts/b27b9f95/image-20211220193153301.png" alt="image-20211220193153301"></p>
<h3 id="每个文章的浏览次数统计"><a class="header-anchor" href="#每个文章的浏览次数统计"></a>每个文章的浏览次数统计</h3>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/lijing742180/article/details/87928554">参考本文</a>, 配置LeanClound 中的变量 <code>Counter</code>,  并如下在<code>_config.next.yml</code>填写<code>app_id</code>和<code>app_key</code>. 并设置<code>security: false</code>，以免安装<code>hexo-leancloud-counter-security</code> (安装很麻烦, <a target="_blank" rel="noopener" href="https://www.dazhuanlan.com/codingmonkey/topics/1589913">详见</a>)</p>
<p>这个LeanClound账号和当中的应用实例, 可以和Vercel评论区所使用的共用, 因而<code>app_id</code>和<code>app_key</code>也与Vercel评论区的相同.</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># Show number of visitors of each article.</span>
<span class="token comment"># You can visit https://www.leancloud.cn to get AppID and AppKey.</span>
leancloud_visitors:
  enable: <span class="token boolean">true</span>
  app_id: 5JGxxxxxxI
  app_key: Jv9xxxxxxEq7
  <span class="token comment"># Required for apps from CN region</span>
  server_url: <span class="token comment"># &lt;your server url></span>
  <span class="token comment"># Dependencies: https://github.com/theme-next/hexo-leancloud-counter-security</span>
  <span class="token comment"># If you don't care about security in leancloud counter and just want to use it directly</span>
  <span class="token comment"># (without hexo-leancloud-counter-security plugin), set `security` to `false`.</span>
  security: <span class="token boolean">false</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>记录文章访问量的唯一标识符是文章的发布日期和文章的标题，因此要确保这两个数值组合的唯一性，如果你更改了这两个数值，会造成文章阅读数值的清零重计。</p>
<p>相比于 <code>busuanzi</code>, 使用LeanCloud统计文章浏览次数, 有两个优点:</p>
<ul>
<li>可首页中无法显示各篇文章的浏览次数</li>
<li>使用safari访问, 每篇文章单独计数, 不会所有文章浏览次数和整个网站的浏览次数相同</li>
</ul>
<h1 id="报错"><a class="header-anchor" href="#报错"></a>报错</h1>
<h2 id="gyp-ERR-stack-Error-gyp-failed-with-exit-code-1"><a class="header-anchor" href="#gyp-ERR-stack-Error-gyp-failed-with-exit-code-1"></a>gyp ERR! stack Error: <code>gyp</code> failed with exit code: 1</h2>
<p>报错</p>
<pre class="line-numbers language-none"><code class="language-none">gyp ERR! configure error
gyp ERR! stack Error: &#96;gyp&#96; failed with exit code: 1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>解决方法</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js">rm <span class="token operator">-</span>rf node_modules
rm <span class="token keyword">package</span><span class="token operator">-</span>lock<span class="token punctuation">.</span>json
npm update
npm install<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="ENOTEMPTY-directory-not-empty"><a class="header-anchor" href="#ENOTEMPTY-directory-not-empty"></a>ENOTEMPTY: directory not empty</h2>
<p><a target="_blank" rel="noopener" href="https://chun-wen.github.io/hexo/20210322/1226560276/">来源参见</a></p>
<p>若在<code>hexo clean &amp;&amp; hexo generate &amp;&amp; hexo deploy</code>时有如下报错，</p>
<pre class="line-numbers language-none"><code class="language-none">&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D; hexo deploy &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;
INFO  Validating config
INFO  &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;
  ███╗   ██╗███████╗██╗  ██╗████████╗
  ████╗  ██║██╔════╝╚██╗██╔╝╚══██╔══╝
  ██╔██╗ ██║█████╗   ╚███╔╝    ██║
  ██║╚██╗██║██╔══╝   ██╔██╗    ██║
  ██║ ╚████║███████╗██╔╝ ██╗   ██║
  ╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝   ╚═╝
&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;
NexT version 8.8.2
Documentation: https:&#x2F;&#x2F;theme-next.js.org
&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;
INFO  Deploying: git
INFO  Clearing .deploy_git folder...
FATAL &#123;
  err: [Error: ENOTEMPTY: directory not empty, rmdir &#39;&#x2F;Users&#x2F;mac&#x2F;Documents&#x2F;blog&#x2F;my-blog&#x2F;.deploy_git&#x2F;about&#39;] &#123;
    errno: -66,
    code: &#39;ENOTEMPTY&#39;,
    syscall: &#39;rmdir&#39;,
    path: &#39;&#x2F;Users&#x2F;mac&#x2F;Documents&#x2F;blog&#x2F;my-blog&#x2F;.deploy_git&#x2F;about&#39;
  &#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>这说明，用<code>hexo clean</code>打扫不干净<code>.deploy_git/about/</code>，只有在这个文件夹是空的时才能完成<code>hexo deploy</code>。</p>
<p>则只需删除根目录下的<code>.deploy_git/</code>文件夹，</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">rm</span> -rf .deploy_git<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>然后重新执行<code>hexo clean &amp;&amp; hexo generate &amp;&amp; hexo deploy</code>即可重新生成<code>.deploy_git/</code>并完成deploy。</p>

    </div>

    
    
    

    <footer class="post-footer">

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/posts/306d2d2/" rel="prev" title="tensorboard-PermissionError-13">
                  <i class="fa fa-chevron-left"></i> tensorboard-PermissionError-13
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/posts/26c0d38/" rel="next" title="github_pages绑定二级域名">
                  github_pages绑定二级域名 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    <div class="comments" id="waline-comments"></div>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">∞亼</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="站点总字数">401k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">22:15</span>
  </span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/lozad@1.16.0/dist/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  
<script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>





  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"all","js":{"url":"https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js","integrity":"sha256-r+3itOMtGGjap0x+10hu6jW/gZCzxHsoKrOd7gyRSGY="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>


<script class="next-config" data-name="waline" type="application/json">{"lang":"zh-cn","enable":true,"serverURL":"https://waline-hyliang96.vercel.app","placeholder":"Jヾﾉ≧∀≦)o来啊，快活啊!","avatar":"mp","meta":["nick","mail","link"],"pageSize":10,"visitor":false,"comment_count":true,"requiredFields":["nick","mail"],"libUrl":"https://cdn.jsdelivr.net/npm/@waline/client/dist/Waline.min.js","el":"#waline-comments","path":"/posts/b27b9f95/"}</script>
<script>
document.addEventListener('page:loaded', () => {
  NexT.utils.loadComments(CONFIG.waline.el).then(() => 
    NexT.utils.getScript(CONFIG.waline.libUrl, { condition: window.Waline })
  ).then(() => {
    new Waline(CONFIG.waline);
  });
});
</script>
<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"model":{"jsonPath":"/live2dw/assets/tororo.model.json"},"display":{"position":"right","width":150,"height":300,"hOffset":-25,"vOffset":-60},"mobile":{"show":false},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
</html>
